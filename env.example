# =============================================================================
# Naver Connect Chatbot 환경 변수 설정
# =============================================================================
# 이 파일을 .env로 복사하여 실제 값을 입력하세요.
# cp env.example .env
# =============================================================================

# =============================================================================
# Gemini LLM Settings (메인 LLM)
# =============================================================================
# langchain_google_genai의 ChatGoogleGenerativeAI 사용
GOOGLE_API_KEY=your-google-api-key-here
GEMINI_MODEL=gemini-3.1-pro-preview
GEMINI_TEMPERATURE=1.0

# =============================================================================
# Clova X Settings (Embeddings + Reranker API 키 공유)
# =============================================================================
# langchain_naver 패키지의 ClovaXEmbeddings 사용 (LLM은 Gemini로 교체됨)
CLOVASTUDIO_API_KEY=your-clovastudio-api-key-here
CLOVA_EMBEDDINGS_MODEL=bge-m3

# =============================================================================
# Clova Studio Reranker Settings
# =============================================================================
# 검색 결과 재순위화 API (LLM/Embeddings와 CLOVASTUDIO_API_KEY 공유)
# API 문서: https://api.ncloud-docs.com/docs/clovastudio-reranker
# 참고: max_tokens는 출력 토큰 수 (최대 4096), 입력 토큰 수는 최대 128,000
CLOVASTUDIO_RERANKER_ENDPOINT=https://clovastudio.stream.ntruss.com/v1/api-tools/reranker
CLOVASTUDIO_RERANKER_MAX_TOKENS=4096
CLOVASTUDIO_RERANKER_REQUEST_TIMEOUT=60.0

# =============================================================================
# Clova Studio Segmentation Settings
# =============================================================================
# 문단 나누기 API - 문장 간 유사도를 파악하여 주제 단위로 글의 단락을 구분
# API 문서: https://api.ncloud-docs.com/docs/clovastudio-segmentation
# 최대 입력: ~120,000자 (한글 기준, 공백 포함)
CLOVASTUDIO_SEGMENTATION_ENDPOINT=https://clovastudio.stream.ntruss.com/v1/api-tools/segmentation
CLOVASTUDIO_SEGMENTATION_ALPHA=-100
CLOVASTUDIO_SEGMENTATION_SEG_COUNT=-1
CLOVASTUDIO_SEGMENTATION_POST_PROCESS=false
CLOVASTUDIO_SEGMENTATION_POST_PROCESS_MAX_SIZE=1000
CLOVASTUDIO_SEGMENTATION_POST_PROCESS_MIN_SIZE=300
CLOVASTUDIO_SEGMENTATION_REQUEST_TIMEOUT=60.0

# =============================================================================
# Clova Studio Summarization Settings
# =============================================================================
# 요약 API - 긴 텍스트를 짧고 간략하게 요약
# API 문서: https://api.ncloud-docs.com/docs/clovastudio-summarization
# 최대 입력: ~35,000자 (한글 기준, 공백 포함)
CLOVASTUDIO_SUMMARIZATION_ENDPOINT=https://clovastudio.stream.ntruss.com/v1/api-tools/summarization/v2
CLOVASTUDIO_SUMMARIZATION_AUTO_SENTENCE_SPLITTER=true
CLOVASTUDIO_SUMMARIZATION_SEG_COUNT=-1
CLOVASTUDIO_SUMMARIZATION_SEG_MAX_SIZE=1000
CLOVASTUDIO_SUMMARIZATION_SEG_MIN_SIZE=300
CLOVASTUDIO_SUMMARIZATION_INCLUDE_AI_FILTERS=false
CLOVASTUDIO_SUMMARIZATION_REQUEST_TIMEOUT=60.0

# =============================================================================
# Clova Studio RAG Reasoning Settings
# =============================================================================
# RAG 추론 API - Function calling 기반으로 검색 과정을 계획하고 문서 출처 인용
# API 문서: https://api.ncloud-docs.com/docs/clovastudio-ragreasoning
# 최대 입력 토큰: 128,000 / 최대 출력 토큰: 4,096
# tools와 toolChoice는 런타임에 동적으로 설정 (환경변수로 설정 불가)
CLOVASTUDIO_RAG_REASONING_ENDPOINT=https://clovastudio.stream.ntruss.com/v1/api-tools/rag-reasoning
CLOVASTUDIO_RAG_REASONING_TOP_P=0.05
CLOVASTUDIO_RAG_REASONING_TOP_K=40
CLOVASTUDIO_RAG_REASONING_MAX_TOKENS=-1
CLOVASTUDIO_RAG_REASONING_TEMPERATURE=0.2
CLOVASTUDIO_RAG_REASONING_REPETITION_PENALTY=1.1
CLOVASTUDIO_RAG_REASONING_SEED=0
CLOVASTUDIO_RAG_REASONING_INCLUDE_AI_FILTERS=true
CLOVASTUDIO_RAG_REASONING_REQUEST_TIMEOUT=60.0

# =============================================================================
# Qdrant Vector Store Settings
# =============================================================================
# Qdrant 벡터 데이터베이스 설정
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=naver_connect_docs
QDRANT_EMBEDDING_DIMENSIONS=1024

# =============================================================================
# Retriever Settings
# =============================================================================
# 검색기 기본 설정
RETRIEVER_DEFAULT_K=10
RETRIEVER_DEFAULT_SPARSE_WEIGHT=0.5
RETRIEVER_DEFAULT_DENSE_WEIGHT=0.5
RETRIEVER_DEFAULT_RRF_C=60
RETRIEVER_BM25_INDEX_PATH=sparse_index/unified_bm25

# =============================================================================
# Multi Query Settings
# =============================================================================
# 다중 쿼리 검색 설정
MULTI_QUERY_NUM_QUERIES=5
MULTI_QUERY_DEFAULT_STRATEGY=rrf
MULTI_QUERY_RRF_K=60
MULTI_QUERY_INCLUDE_ORIGINAL=true

# =============================================================================
# (Dense+Sparse) + Multi Query = Hybrid Settings
# =============================================================================
# 하이브리드 검색 설정 (Final Hybrid)
ADVANCED_HYBRID_BASE_HYBRID_WEIGHT=0.6
ADVANCED_HYBRID_MULTI_QUERY_WEIGHT=0.4

# =============================================================================
# Logging Settings
# =============================================================================
# 로깅 설정
LOG_LEVEL=INFO
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILE=true
LOG_LOG_DIR=logs
LOG_ROTATION=30 MB
LOG_RETENTION=30 days
LOG_COMPRESSION=zip
LOG_JSON_FORMAT=true
LOG_SERIALIZE=false

# =============================================================================
# Slack Settings
# =============================================================================
# Slack Bot 설정
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token-here
SLACK_SIGNING_SECRET=your-slack-signing-secret-here
SLACK_APP_TOKEN=xapp-your-slack-app-token-here
SLACK_PORT=3000
