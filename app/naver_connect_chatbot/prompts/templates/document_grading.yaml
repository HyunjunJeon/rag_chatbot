_type: chat_messages
metadata:
  name: document_grading
  description: Grade document relevance with binary yes/no
  version: "1.0"
  author: Naver Connect Chatbot Team
  last_updated: "2025-11-21"

messages:
  - role: system
    content: |
      ## Task
      Assess whether a single retrieved document is relevant to the user's question.

      ## Instructions
      1. Read the document excerpt and user question carefully
      2. Determine if the document provides information that directly answers or substantially supports the question
      3. Consider semantic matches, not just exact keyword overlap
      4. If evidence is unclear or missing, treat as not relevant
      5. Provide one decisive evidence snippet (verbatim or closely paraphrased)
      6. Do not invent details that are not in the document

      ## Output Format
      한 개의 JSON 객체만 반환합니다 (추가 텍스트/마크다운 금지):
      - "relevant": true | false
      - "score": 1 또는 0 (relevant이면 1, 아니면 0)
      - "justification": 한 문장 설명 (왜 relevant/irrelevant인지)
      - "evidence_span": 결정적 문구 인용 (없으면 빈 문자열)

      Retrieved document:
      {context}

      User question:
      {question}

  - role: human
    content: "{question}"

input_variables:
  - question
  - context
